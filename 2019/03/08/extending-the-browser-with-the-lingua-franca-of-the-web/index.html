<!DOCTYPE html><html lang="en-US"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/static/images/2019-03-08-architecture.png"/><link rel="preload" as="image" href="/static/images/2019-03-08-components.png"/><link rel="preload" as="image" href="/static/images/2019-03-08-communication.png"/><link rel="stylesheet" href="/_next/static/css/60d5ae1a4351e98a.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/01f63581d77a7b07.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-426ae7781c70e24b.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-cc48c28d170fddc2.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-0a6331c18b0d37aa.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-715e3a652bc6b546.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-d7e0a94ebe194dac.js" async=""></script><script src="/_next/static/chunks/app/page-84b663e6d1625d16.js" async=""></script><script src="/_next/static/chunks/749-1aefd436964833c3.js" async=""></script><script src="/_next/static/chunks/app/layout-8a3d32e7172cce23.js" async=""></script><title>Extending the browser with the lingua franca of the web</title><meta name="description" content="Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS."/><link rel="author" href="https://0xadada.pub"/><meta name="author" content="0xADADA"/><meta name="keywords" content="projects,open-source,webextensions,web extensions,browser extensions,browser plugins,javascript,web development,software development,progressive web apps"/><link rel="alternate" type="application/rss+xml" href="https://0xadada.pub/rss.xml"/><meta property="og:title" content="Extending the browser with the lingua franca of the web"/><meta property="og:description" content="Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS."/><meta property="og:url" content="https://0xadada.pub/2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web/"/><meta property="og:site_name" content="0xADADA"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://0xadada.pub/static/images/2019-03-08-components.png"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="800"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Extending the browser with the lingua franca of the web"/><meta name="twitter:description" content="Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS."/><meta name="twitter:image" content="https://0xadada.pub/static/images/2019-03-08-components.png"/><meta name="twitter:image:width" content="800"/><meta name="twitter:image:height" content="800"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="48x48"/><link rel="apple-touch-icon" href="/apple-icon.png?b764b3a1dbf00a82" type="image/png" sizes="180x180"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><main class="layout_layout__dCqca"><article class="hentry h-entry"><header><h1 class="entry-title p-name">Extending the browser with the lingua franca of the web</h1><time class="display-date_published__A_L_d dt-published" dateTime="2019-03-08T00:00:00.000Z">Friday March 8, 2019</time><span class="h-card page_byline__wbXsN"> by <span class="fn p-author p-name">0xADADA</span></span></header><div class="entry-content e-content"><p>A browser extension adds features to a web browser. They‚Äôre created using
standard web technologies‚Äî JavaScript, HTML, and CSS. Extensions can run
JavaScript permanently in the background or can run on any page the user visits.
Extensions can also specify popup windows and options pages.</p>
<p>All modern browsers increasingly support a standard called the WebExtensions
API. This API provides extensions the additional functionality to add or change
the core features of the browser. Extensions developed to follow the
WebExtensions API will in most cases run in Firefox, Chrome, Opera, Brave, and
Edge with just a few minor differences.</p>
<p>An extension will typically be a composition of <em>any or all</em> of the
architectural parts of the extensions API:</p>
<figure class="rehype-figure"><img src="/static/images/2019-03-08-architecture.png" alt="web extension architecture"/><figcaption>web extension architecture</figcaption></figure>
<ul>
<li><strong>background scripts</strong> Are essentially JavaScript running in a hidden tab,
loaded when the browser starts and run continually. Background scripts are
where extension authors write code that handle global browser events and
respond to actions. They maintain long-term state, or can perform long-term
operations. This code runs independently of any any particular web page or
browser window.</li>
<li><strong>content scripts</strong> Are JavaScript and CSS loaded into any web page whose URL
matches a specified pattern. This code can be written to modify web pages
(e.g. AdBlockers), or add features to web pages.</li>
<li><strong>browser actions</strong> A button and icon that the extension adds to the browser‚Äôs
toolbar that can trigger events. These actions <em>may</em> have a <strong>popup</strong>.</li>
<li><strong>popup</strong> A popup is really just another hidden tab which is shown when the
extensios toolbar icon is clicked. The content of a popup is specified using
HTML, CSS, and JavaScript. popup.html (in blue, below) is a basic html page
that is loaded into the popup window, but can also be opened in another
browser tab just like any other html page (if you know the extension URL).</li>
<li><strong>page actions</strong> Similar to browser actions, but these can add menu items to
the on-page context menu, and can also open a popup window.</li>
<li><strong>options pages</strong> An extension can also specify additional pages that are
available as popup windows, often offering extension preference panels.</li>
</ul>
<figure class="rehype-figure"><img src="/static/images/2019-03-08-components.png" alt="different parts of an extension"/><figcaption>different parts of an extension</figcaption></figure>
<h2 id="creating-a-simple-extension">Creating a simple extension</h2>
<p>Every extension <em>must, by definition</em> define a <code>manifest.json</code> file, which is
the only file that every extension using WebExtension APIs must contain. The
<code>manifest.json</code> specifies basic metadata about an extension, and also resolves
how the code in the extension is loaded, including content scripts, background
scripts, and browser actions.</p>
<p>In order to work in all modern browsers, a few fields must be defined in
<code>manifest.json</code>:</p>
<ul>
<li><code>manifest_version</code> defines the WebExtensions API level (2 is the current
version)</li>
<li><code>name</code> the extension name</li>
<li><code>version</code> version of the addon</li>
<li><code>author</code> name of the person or organization (required by Edge) who wrote the
extension</li>
</ul>
<p>A few other key fields are optional but highly recommended:</p>
<ul>
<li><code>description</code> text displayed in the Extension UI and in the extensions app
stores</li>
<li><code>icons</code> will be shown in the browser toolbar, in the Extension manager UI, and
the various extensions app stores<!-- -->
<ul>
<li>a 32px icon will be shown in the toolbar (resized)</li>
<li>a 48px icon will be shown in the Firefox Add-ons Manager and Chrome
Extensions Management</li>
<li>a 96px icon will be shown in the Firefox Add-ons Manager (on high DPI
devices with a Retina display)</li>
<li>a 128px icon will be shown in the Chrome Web Store</li>
</ul>
</li>
</ul>
<p>To deliver the best visual experience to users with high-resolution displays,
the browser will attempt to find the best matching resolution icon. It is best
practice to provide a set of icons in multiple resolutions.</p>
<p>This <code>manifest.json</code> defines a minimal browser extension that provides an icon
but doesn‚Äôt do anything, but <em>hey</em>, its something:</p>
<pre><code class="language-json">{
  &quot;manifest_version&quot;: 2,

  &quot;version&quot;: &quot;1.0&quot;,

  &quot;name&quot;: &quot;My extension&quot;,
  &quot;author&quot;: &quot;me&quot;,

  &quot;description&quot;: &quot;My first extension&quot;,

  &quot;icons&quot;: {
    &quot;16&quot;: &quot;icon-16.png&quot;,
    &quot;32&quot;: &quot;icon-32.png&quot;,
    &quot;48&quot;: &quot;icon-48.png&quot;,
    &quot;96&quot;: &quot;icon-96.png&quot;
  }
}
</code></pre>
<p>Mozilla maintains a
<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_compatibility_for_manifest.json">WebExtensions browser compatibility table</a>
which is helpful for getting the <code>manifest.json</code> working across all major
browsers.</p>
<h2 id="extension-runtime-contexts">Extension Runtime Contexts</h2>
<p>Access to the complete WebExtensions API is not universally accessible from
JavaScript. There are different levels of access depending on the context in
which the code is running. There are essentially two contexts: The background
context which has access to the complete WebExtensions API, but cannot access
any web page DOM; and the content script context, which has access to the any
web page DOM API, but doesn‚Äôt have complete access to the WebExtensions API. The
two contexts work together with a message passing API that allows them to
accomplish tasks together.</p>
<p><strong>Background scripts</strong> run in the context of a special hidden tab called a
background page. This gives them a <code>window</code> global containing parts of the
standard DOM API. Background scripts can access <em>all of the WebExtension APIs</em>
(as long as the <code>manifest.json</code> has opted the extension into the necessary
permissions). Background scripts cannot access the DOM of any web page.</p>
<p>Background scripts <em>can</em> make XHR requests to any hosts (as long as the
<code>manifest.json</code> have granted host permissions). Background scripts do not get
direct access to web pages, however, they can load content scripts into web
pages and then can communicate with these content scripts using the
<code>browser.runtime.sendMessage</code> API. The content scripts can then access the web
page DOM on behalf of the background script.</p>
<p><strong>Content scripts</strong> are extension-provided scripts which run in the context of a
web page. These scripts can see and manipulate the page DOM, just like normal
scripts loaded by the page. Unlike normal page scripts, they can also make
cross-domain XHR requests (when granted permission). Content scripts have access
to a more restricted
<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#WebExtension_APIs">subset of the overall WebExtensions API</a>.
For example, the <code>browser.cookies</code> API is not available to content scripts.
Content scripts can exchange messages with their background scripts, and in this
way indirectly access all the WebExtension APIs.</p>
<p>Web extension code communicates across contexts using either the standard DOM
API <code>window.postMessage(...)</code>: for communicate between content scripts and other
scripts on the host page, or the content scripts and other page scripts can
communicate with the background script using the
<code>browser.runtime.sendMessage(...)</code> API. The background script can additionally
send messages to the content script using <code>browser.tabs.sendMessage(...)</code>.</p>
<figure class="rehype-figure"><img src="/static/images/2019-03-08-communication.png" alt="extension message communication"/><figcaption>extension message communication</figcaption></figure>
<h2 id="deploying-an-extension">Deploying an extension</h2>
<p>Extensions are compressed into a zip file before being uploaded to the extension
app store. Mozilla maintains a build tool for creating a zipped package that‚Äôll
work on both the Chrome Web Store and the Firefox Addons store. This tool can
also perform project linting, as well as testing and a development runner that
hot-reloads extension code for Firefox.</p>
<ul>
<li><a href="https://github.com/mozilla/web-ext/">web-ext</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Documentation</a></li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://developer.chrome.com/extensions">Google WebExtensions API</a></li>
<li><a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions">Mozilla WebExtensions API</a></li>
<li><a href="https://github.com/brave/browser-laptop/wiki/Developer-Notes-on-Installing-or-Updating-Extensions">Brave</a></li>
<li><a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/extensions/">Microsoft</a></li>
</ul></div><footer class="license_copyright__EpMnZ">This is licensed under a Creative Commons <!-- -->cc-by-nc-sa<!-- --> International License</footer></article></main><footer class="footer_footer__woFMY layout_layout__dCqca"><nav><p>¬© 2003-<!-- -->2024<!-- --> 0xADADA (unless otherwise noted.)<br/><span class="h-card"><span class="p-note" hidden="">0xADADA is a Software Engineer / Writer / Motorsports Driver exploring the impact of the attention economy on idleness, time, and lived experience. üßë‚Äçüíªüîßüöó‚úçÔ∏èüîí</span><a class="u-url u-uid" title="0xADADA" href="https://0xadada.pub/">0xADADA</a> <a class="c-Meta u-email" rel="me" title="0xADADA" href="mailto:0xadada.pub@protonmail.com">Email</a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on Warpcast" href="https://warpcast.com/0xadada">Farcaster</a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on Mastodon" href="https://mastodon.cloud/@0xADADA">Mastodon</a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on Bluesky" href="https://bsky.app/profile/0xadada.bsky.social">Bluesky</a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on Twitter" href="https://twitter.com/0xadada"><del>Twitter</del></a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on GitHub" href="https://github.com/0xadada">GitHub</a> <a class="u-url" rel="me nofollow external noopener" title="0xADADA on Goodreads" href="https://www.goodreads.com/review/list/60524683-0xadada?shelf=wanted">Goodreads</a> <a href="/colophon/">Colophon</a> <a href="/rss.xml">RSS</a> <img alt="0xADADA icon" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" class="u-photo" style="color:transparent;margin-bottom:-0.125rem" src="/static/images/meta/avatar.svg"/></span></p></nav><form action="https://buttondown.email/api/emails/embed-subscribe/0xadada" method="post" target="popupwindow"><label for="email">Sign up to get emailed when I write new things:<!-- --> </label><input type="email" id="email" name="email"/><input type="submit" value="Subscribe"/></form></footer><script src="/_next/static/chunks/webpack-426ae7781c70e24b.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/60d5ae1a4351e98a.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/01f63581d77a7b07.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\na:I[5250,[\"250\",\"static/chunks/250-d7e0a94ebe194dac.js\",\"931\",\"static/chunks/app/page-84b663e6d1625d16.js\"],\"\"]\nb:I[1749,[\"250\",\"static/chunks/250-d7e0a94ebe194dac.js\",\"749\",\"static/chunks/749-1aefd436964833c3.js\",\"185\",\"static/chunks/app/layout-8a3d32e7172cce23.js\"],\"Image\"]\nd:I[8955,[],\"\"]\n8:[\"slug\",\"2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web\",\"c\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/60d5ae1a4351e98a.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"7wmb5To-8KI46t4_eIlhG\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2019\\\",\\\"03\\\",\\\"08\\\",\\\"extending-the-browser-with-the-lingua-franca-of-the-web\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/01f63581d77a7b07.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en-US\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"main\",null,{\"className\":\"layout_layout__dCqca\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"footer_footer__woFMY layout_layout__dCqca\",\"children\":[[\"$\",\"nav\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"¬© 2003-\",\"2024\",\" 0xADADA (unless otherwise noted.)\",[\"$\",\"br\",null,{}],[\"$\",\"span\",null,{\"className\":\"h-card\",\"children\":[[\"$\",\"span\",null,{\"className\":\"p-note\",\"hidden\":true,\"children\":\"0xADADA is a Software Engineer / Writer / Motorsports Driver exploring the impact of the attention economy on idleness, time, and lived experience. üßë‚Äçüíªüîßüöó‚úçÔ∏èüîí\"}],[\"$\",\"$La\",null,{\"className\":\"u-url u-uid\",\"href\":\"https://0xadada.pub/\",\"title\":\"0xADADA\",\"children\":\"0xADADA\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"mailto:0xadada.pub@protonmail.com\",\"className\":\"c-Meta u-email\",\"rel\":\"me\",\"title\":\"0xADADA\",\"children\":\"Email\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://warpcast.com/0xadada\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on Warpcast\",\"children\":\"Farcaster\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://mastodon.cloud/@0xADADA\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on Mastodon\",\"children\":\"Mastodon\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://bsky.app/profile/0xadada.bsky.social\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on Bluesky\",\"children\":\"Bluesky\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://twitter.com/0xadada\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on Twitter\",\"children\":[\"$\",\"del\",null,{\"children\":\"Twitter\"}]}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://github.com/0xadada\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on GitHub\",\"children\":\"GitHub\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"https://www.goodreads.com/review/list/60524683-0xadada?shelf=wanted\",\"className\":\"u-url\",\"rel\":\"me nofollow external noopener\",\"title\":\"0xADADA on Goodreads\",\"children\":\"Goodreads\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"/colophon/\",\"children\":\"Colophon\"}],\" \",[\"$\",\"$La\",null,{\"href\":\"/rss.xml\",\"children\":\"RSS\"}],\" \",[\"$\",\"$Lb\",null,{\"className\":\"u-photo\",\"src\":\"/static/images/meta/avatar.svg\",\"alt\":\"0xADADA icon\",\"width\":\"20\",\"height\":\"20\",\"style\":{\"marginBottom\":\"-0.125rem\"}}]]}]]}]}],[\"$\",\"form\",null,{\"action\":\"https://buttondown.email/api/emails/embed-subscribe/0xadada\",\"method\":\"post\",\"target\":\"popupwindow\",\"children\":[[\"$\",\"label\",null,{\"htmlFor\":\"email\",\"children\":[\"Sign up to get emailed when I write new things:\",\" \"]}],[\"$\",\"input\",null,{\"type\":\"email\",\"name\":\"email\",\"id\":\"email\"}],[\"$\",\"input\",null,{\"type\":\"submit\",\"value\":\"Subscribe\"}]]}]]}]]}]}],null]],\"initialHead\":[false,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"hentry h-entry\",\"children\":[[\"$\",\"header\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"entry-title p-name\",\"children\":\"Extending the browser with the lingua franca of the web\"}],\"$undefined\",[\"$\",\"time\",null,{\"className\":\"display-date_published__A_L_d dt-published\",\"dateTime\":\"2019-03-08T00:00:00.000Z\",\"children\":\"Friday March 8, 2019\"}],[\"$\",\"span\",null,{\"className\":\"h-card page_byline__wbXsN\",\"children\":[\" by \",[\"$\",\"span\",null,{\"className\":\"fn p-author p-name\",\"children\":\"0xADADA\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"entry-content e-content\",\"children\":[[\"$\",\"p\",null,{\"children\":\"A browser extension adds features to a web browser. They‚Äôre created using\\nstandard web technologies‚Äî JavaScript, HTML, and CSS. Extensions can run\\nJavaScript permanently in the background or can run on any page the user visits.\\nExtensions can also specify popup windows and options pages.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"All modern browsers increasingly support a standard called the WebExtensions\\nAPI. This API provides extensions the additional functionality to add or change\\nthe core features of the browser. Extensions developed to follow the\\nWebExtensions API will in most cases run in Firefox, Chrome, Opera, Brave, and\\nEdge with just a few minor differences.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"An extension will typically be a composition of \",[\"$\",\"em\",null,{\"children\":\"any or all\"}],\" of the\\narchitectural parts of the extensions API:\"]}],\"\\n\",[\"$\",\"figure\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/2019-03-08-architecture.png\",\"alt\":\"web extension architecture\"}],[\"$\",\"figcaption\",null,{\"children\":\"web extension architecture\"}]]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"background scripts\"}],\" Are essentially JavaScript running in a hidden tab,\\nloaded when the browser starts and run continually. Background scripts are\\nwhere extension authors write code that handle global browser events and\\nrespond to actions. They maintain long-term state, or can perform long-term\\noperations. This code runs independently of any any particular web page or\\nbrowser window.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"content scripts\"}],\" Are JavaScript and CSS loaded into any web page whose URL\\nmatches a specified pattern. This code can be written to modify web pages\\n(e.g. AdBlockers), or add features to web pages.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"browser actions\"}],\" A button and icon that the extension adds to the browser‚Äôs\\ntoolbar that can trigger events. These actions \",[\"$\",\"em\",null,{\"children\":\"may\"}],\" have a \",[\"$\",\"strong\",null,{\"children\":\"popup\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"popup\"}],\" A popup is really just another hidden tab which is shown when the\\nextensios toolbar icon is clicked. The content of a popup is specified using\\nHTML, CSS, and JavaScript. popup.html (in blue, below) is a basic html page\\nthat is loaded into the popup window, but can also be opened in another\\nbrowser tab just like any other html page (if you know the extension URL).\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"page actions\"}],\" Similar to browser actions, but these can add menu items to\\nthe on-page context menu, and can also open a popup window.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"options pages\"}],\" An extension can also specify additional pages that are\\navailable as popup windows, often offering extension preference panels.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"figure\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/2019-03-08-components.png\",\"alt\":\"different parts of an extension\"}],[\"$\",\"figcaption\",null,{\"children\":\"different parts of an extension\"}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"creating-a-simple-extension\",\"children\":\"Creating a simple extension\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Every extension \",[\"$\",\"em\",null,{\"children\":\"must, by definition\"}],\" define a \",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" file, which is\\nthe only file that every extension using WebExtension APIs must contain. The\\n\",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" specifies basic metadata about an extension, and also resolves\\nhow the code in the extension is loaded, including content scripts, background\\nscripts, and browser actions.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In order to work in all modern browsers, a few fields must be defined in\\n\",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\":\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"manifest_version\"}],\" defines the WebExtensions API level (2 is the current\\nversion)\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"name\"}],\" the extension name\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"version\"}],\" version of the addon\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"author\"}],\" name of the person or organization (required by Edge) who wrote the\\nextension\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"A few other key fields are optional but highly recommended:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"description\"}],\" text displayed in the Extension UI and in the extensions app\\nstores\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"icons\"}],\" will be shown in the browser toolbar, in the Extension manager UI, and\\nthe various extensions app stores\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"a 32px icon will be shown in the toolbar (resized)\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"a 48px icon will be shown in the Firefox Add-ons Manager and Chrome\\nExtensions Management\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"a 96px icon will be shown in the Firefox Add-ons Manager (on high DPI\\ndevices with a Retina display)\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"a 128px icon will be shown in the Chrome Web Store\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"To deliver the best visual experience to users with high-resolution displays,\\nthe browser will attempt to find the best matching resolution icon. It is best\\npractice to provide a set of icons in multiple resolutions.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"This \",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" defines a minimal browser extension that provides an icon\\nbut doesn‚Äôt do anything, but \",[\"$\",\"em\",null,{\"children\":\"hey\"}],\", its something:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-json\",\"children\":\"{\\n  \\\"manifest_version\\\": 2,\\n\\n  \\\"version\\\": \\\"1.0\\\",\\n\\n  \\\"name\\\": \\\"My extension\\\",\\n  \\\"author\\\": \\\"me\\\",\\n\\n  \\\"description\\\": \\\"My first extension\\\",\\n\\n  \\\"icons\\\": {\\n    \\\"16\\\": \\\"icon-16.png\\\",\\n    \\\"32\\\": \\\"icon-32.png\\\",\\n    \\\"48\\\": \\\"icon-48.png\\\",\\n    \\\"96\\\": \\\"icon-96.png\\\"\\n  }\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Mozilla maintains a\\n\",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_compatibility_for_manifest.json\",\"children\":\"WebExtensions browser compatibility table\"}],\"\\nwhich is helpful for getting the \",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" working across all major\\nbrowsers.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"extension-runtime-contexts\",\"children\":\"Extension Runtime Contexts\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Access to the complete WebExtensions API is not universally accessible from\\nJavaScript. There are different levels of access depending on the context in\\nwhich the code is running. There are essentially two contexts: The background\\ncontext which has access to the complete WebExtensions API, but cannot access\\nany web page DOM; and the content script context, which has access to the any\\nweb page DOM API, but doesn‚Äôt have complete access to the WebExtensions API. The\\ntwo contexts work together with a message passing API that allows them to\\naccomplish tasks together.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Background scripts\"}],\" run in the context of a special hidden tab called a\\nbackground page. This gives them a \",[\"$\",\"code\",null,{\"children\":\"window\"}],\" global containing parts of the\\nstandard DOM API. Background scripts can access \",[\"$\",\"em\",null,{\"children\":\"all of the WebExtension APIs\"}],\"\\n(as long as the \",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" has opted the extension into the necessary\\npermissions). Background scripts cannot access the DOM of any web page.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Background scripts \",[\"$\",\"em\",null,{\"children\":\"can\"}],\" make XHR requests to any hosts (as long as the\\n\",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" have granted host permissions). Background scripts do not get\\ndirect access to web pages, however, they can load content scripts into web\\npages and then can communicate with these content scripts using the\\n\",[\"$\",\"code\",null,{\"children\":\"browser.runtime.sendMessage\"}],\" API. The content scripts can then access the web\\npage DOM on behalf of the background script.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Content scripts\"}],\" are extension-provided scripts which run in the context of a\\nweb page. These scripts can see and manipulate the page DOM, just like normal\\nscripts loaded by the page. Unlike normal page scripts, they can also make\\ncross-domain XHR requests (when granted permission). Content scripts have access\\nto a more restricted\\n\",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#WebExtension_APIs\",\"children\":\"subset of the overall WebExtensions API\"}],\".\\nFor example, the \",[\"$\",\"code\",null,{\"children\":\"browser.cookies\"}],\" API is not available to content scripts.\\nContent scripts can exchange messages with their background scripts, and in this\\nway indirectly access all the WebExtension APIs.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Web extension code communicates across contexts using either the standard DOM\\nAPI \",[\"$\",\"code\",null,{\"children\":\"window.postMessage(...)\"}],\": for communicate between content scripts and other\\nscripts on the host page, or the content scripts and other page scripts can\\ncommunicate with the background script using the\\n\",[\"$\",\"code\",null,{\"children\":\"browser.runtime.sendMessage(...)\"}],\" API. The background script can additionally\\nsend messages to the content script using \",[\"$\",\"code\",null,{\"children\":\"browser.tabs.sendMessage(...)\"}],\".\"]}],\"\\n\",[\"$\",\"figure\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/2019-03-08-communication.png\",\"alt\":\"extension message communication\"}],[\"$\",\"figcaption\",null,{\"children\":\"extension message communication\"}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"deploying-an-extension\",\"children\":\"Deploying an extension\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Extensions are compressed into a zip file before being uploaded to the extension\\napp store. Mozilla maintains a build tool for creating a zipped package that‚Äôll\\nwork on both the Chrome Web Store and the Firefox Addons store. This tool can\\nalso perform project linting, as well as testing and a development runner that\\nhot-reloads extension code for Firefox.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/mozilla/web-ext/\",\"children\":\"web-ext\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext\",\"children\":\"Documentation\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"resources\",\"children\":\"Resources\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://developer.chrome.com/extensions\",\"children\":\"Google WebExtensions API\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/Add-ons/WebExtensions\",\"children\":\"Mozilla WebExtensions API\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/brave/browser-laptop/wiki/Developer-Notes-on-Installing-or-Updating-Extensions\",\"children\":\"Brave\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/extensions/\",\"children\":\"Microsoft\"}]}],\"\\n\"]}]]}],[\"$\",\"footer\",null,{\"className\":\"license_copyright__EpMnZ\",\"children\":[\"This is licensed under a Creative Commons \",\"cc-by-nc-sa\",\" International License\"]}]]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Extending the browser with the lingua franca of the web\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"author\",\"href\":\"https://0xadada.pub\"}],[\"$\",\"meta\",\"5\",{\"name\":\"author\",\"content\":\"0xADADA\"}],[\"$\",\"meta\",\"6\",{\"name\":\"keywords\",\"content\":\"projects,open-source,webextensions,web extensions,browser extensions,browser plugins,javascript,web development,software development,progressive web apps\"}],[\"$\",\"link\",\"7\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://0xadada.pub/rss.xml\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:title\",\"content\":\"Extending the browser with the lingua franca of the web\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:description\",\"content\":\"Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS.\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:url\",\"content\":\"https://0xadada.pub/2019/03/08/extending-the-browser-with-the-lingua-franca-of-the-web/\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:site_name\",\"content\":\"0xADADA\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image\",\"content\":\"https://0xadada.pub/static/images/2019-03-08-components.png\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image:height\",\"content\":\"800\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:title\",\"content\":\"Extending the browser with the lingua franca of the web\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:description\",\"content\":\"Understanding WebExtensions; how to create browser extensions  using standard web technologies‚Äî JavaScript, HTML, and CSS.\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:image\",\"content\":\"https://0xadada.pub/static/images/2019-03-08-components.png\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:height\",\"content\":\"800\"}],[\"$\",\"link\",\"23\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"24\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?b764b3a1dbf00a82\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>